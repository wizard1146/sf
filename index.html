<head>
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="manifest" href="manifest.json" />
 <!-- need to update this https://github.com/Sinova/Collisions -->
 <script src="js/collisions.min.js"></script>
 <!-- Adapted from https://github.com/bobboteck/JoyStick -->
 <script src="js/joy.js"></script>
 <!-- sf -->
 <script src="js/sf.splash.js" class="sf-script"></script>
 <script src="js/sf.preloader.js" class="sf-script"></script>
 <style>
    html, body {
      overflow: hidden;
      width   : 100%;
      height  : 100%;
      margin  : 0;
      padding : 0;
    }
 </style>
</head>
<body></body>
<script>

/*
   Things to fix
   
   Place movement calculation into Model
   FPS counting
   Angle estimators
   Generate neighbouring tiles
 */
 
document.addEventListener("DOMContentLoaded", async function(event) {

  sf.preloader.init()
  
  // window.addEventListener('gamepadconnected', connected)
})

/*
let gp;
connected = function(e) {
  gp = e.gamepad.index
  document.body.addEventListener(`sfc-tick`, gpt)
}

gpt = function() {
  let pad = navigator.getGamepads()[gp]
  
  let lx, ly, rx, ry;
  
  lx = pad.axes[0]
  ly = pad.axes[1]
  rx = pad.axes[2]
  ry = pad.axes[3]
  
  let dir = sf.input.dir()
  if (dir) {
    dir.update( lx*dir.er + dir.canvas.width/2, ly*dir.er + dir.canvas.height/2 )
  }
  let aim = sf.input.aim()
  if (aim) {
    //aim.update( lx*aim.er + aim.canvas.width/2, ly*aim.er + aim.canvas.height/2 )
  }
}
*/

</script>
